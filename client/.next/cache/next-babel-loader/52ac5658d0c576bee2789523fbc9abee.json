{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Sarthak\\\\YT_Workflow_Cloud\\\\client\\\\components\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport styles from '../styles/scss/profile.module.scss';\nimport { useEffect, useState, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { setProfileImage } from '../components/actions/profileImageActions';\nimport Router from 'next/router';\n\nvar Profile = function Profile() {\n  _s();\n\n  var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\n  var _useState = useState(''),\n      currentDate = _useState[0],\n      setCurrentDate = _useState[1];\n\n  var profileImageFormRef = useRef();\n  var jwtToken = useSelector(function (state) {\n    return state.jwtToken;\n  }); // const profileImage = useSelector((state) => state.profileImage);\n  // console.log(profileImage);\n\n  var profileName = useSelector(function (state) {\n    return state.profileName;\n  });\n  var profileFirstName = profileName.split(' ')[0];\n\n  var _useState2 = useState(''),\n      profileImage = _useState2[0],\n      setProfileImage = _useState2[1];\n\n  var _useState3 = useState(''),\n      profileUsername = _useState3[0],\n      setProfileUsername = _useState3[1]; // const dispatch = useDispatch();\n\n\n  var getProfileImage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var profileImageUrlRes, profileImageUrlJson;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('http://localhost:8000/get-profile-image', {\n                headers: {\n                  'Content-type': 'application/json',\n                  Authorization: 'Bearer ' + jwtToken\n                }\n              });\n\n            case 2:\n              profileImageUrlRes = _context.sent;\n\n              if (!(profileImageUrlRes.status === 200)) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 6;\n              return profileImageUrlRes.json();\n\n            case 6:\n              profileImageUrlJson = _context.sent;\n              setProfileImage(profileImageUrlJson['msg']);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getProfileImage() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getProfileUsername = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var profileUsernameRes;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch('http://localhost:8000/get-profile-image', {\n                headers: {\n                  'Content-type': 'application/json',\n                  Authorization: 'Bearer ' + jwtToken\n                }\n              });\n\n            case 2:\n              profileUsernameRes = _context2.sent;\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getProfileUsername() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var updateProfileImage = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var profileForm, res, resJson;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              profileForm = new FormData(profileImageFormRef.current);\n              _context3.next = 3;\n              return fetch('http://localhost:8000/upload-profile-image', {\n                method: 'POST',\n                headers: {\n                  Authorization: 'Bearer ' + jwtToken\n                },\n                body: profileForm\n              });\n\n            case 3:\n              res = _context3.sent;\n\n              if (!(res.status !== 200)) {\n                _context3.next = 6;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 6:\n              _context3.next = 8;\n              return res.json();\n\n            case 8:\n              resJson = _context3.sent;\n              // dispatch(setProfileImage(resJson['msg']));\n              console.log(resJson['msg']);\n              getProfileImage(); // Router.push(Router.pathname);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function updateProfileImage() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var currentDateInfo = new Date();\n    var month = months[currentDateInfo.getMonth()];\n    var day = currentDateInfo.getDate();\n    var year = currentDateInfo.getFullYear();\n    setCurrentDate(month + ' ' + day + ', ' + year);\n    getProfileImage();\n  }, []);\n  return __jsx(\"div\", {\n    className: styles.profileContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 3\n    }\n  }, __jsx(\"div\", {\n    className: styles.imageInputSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 4\n    }\n  }, __jsx(\"img\", {\n    className: styles.profileImage,\n    src: profileImage,\n    alt: profileName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }), __jsx(FontAwesomeIcon, {\n    className: styles.editIcon,\n    icon: 'user-edit',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }), __jsx(\"form\", {\n    encType: \"multipart/form-data\",\n    ref: profileImageFormRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, __jsx(\"input\", {\n    type: \"file\",\n    onChange: updateProfileImage,\n    accept: 'image/*',\n    className: styles.profileImageInput,\n    name: \"image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 6\n    }\n  }))), __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 4\n    }\n  }, \"Hey \", profileFirstName, \"!\"), __jsx(\"h5\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 4\n    }\n  }, currentDate));\n};\n\n_s(Profile, \"ds3NTwBIQEL2xql4tJH6k9H2vSw=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Sarthak/YT_Workflow_Cloud/client/components/Profile.js"],"names":["styles","useEffect","useState","useRef","useSelector","useDispatch","FontAwesomeIcon","setProfileImage","Router","Profile","months","currentDate","setCurrentDate","profileImageFormRef","jwtToken","state","profileName","profileFirstName","split","profileImage","profileUsername","setProfileUsername","getProfileImage","fetch","headers","Authorization","profileImageUrlRes","status","json","profileImageUrlJson","getProfileUsername","profileUsernameRes","updateProfileImage","profileForm","FormData","current","method","body","res","resJson","console","log","currentDateInfo","Date","month","getMonth","day","getDate","year","getFullYear","profileContainer","imageInputSection","editIcon","profileImageInput"],"mappings":"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","sourcesContent":["import styles from '../styles/scss/profile.module.scss';\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { setProfileImage } from '../components/actions/profileImageActions';\r\nimport Router from 'next/router';\r\n\r\nconst Profile = () => {\r\n\tconst months = [\r\n\t\t'January',\r\n\t\t'February',\r\n\t\t'March',\r\n\t\t'April',\r\n\t\t'May',\r\n\t\t'June',\r\n\t\t'July',\r\n\t\t'August',\r\n\t\t'September',\r\n\t\t'October',\r\n\t\t'November',\r\n\t\t'December'\r\n\t];\r\n\tconst [ currentDate, setCurrentDate ] = useState('');\r\n\r\n\tconst profileImageFormRef = useRef();\r\n\tconst jwtToken = useSelector((state) => state.jwtToken);\r\n\r\n\t// const profileImage = useSelector((state) => state.profileImage);\r\n\t// console.log(profileImage);\r\n\tconst profileName = useSelector((state) => state.profileName);\r\n\tconst profileFirstName = profileName.split(' ')[0];\r\n\tconst [ profileImage, setProfileImage ] = useState('');\r\n\tconst [ profileUsername, setProfileUsername ] = useState('');\r\n\r\n\t// const dispatch = useDispatch();\r\n\r\n\tconst getProfileImage = async () => {\r\n\t\tconst profileImageUrlRes = await fetch('http://localhost:8000/get-profile-image', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-type': 'application/json',\r\n\t\t\t\tAuthorization: 'Bearer ' + jwtToken\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (profileImageUrlRes.status === 200) {\r\n\t\t\tconst profileImageUrlJson = await profileImageUrlRes.json();\r\n\t\t\tsetProfileImage(profileImageUrlJson['msg']);\r\n\t\t}\r\n\t};\r\n\r\n\tconst getProfileUsername = async () => {\r\n\t\tconst profileUsernameRes = await fetch('http://localhost:8000/get-profile-image', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-type': 'application/json',\r\n\t\t\t\tAuthorization: 'Bearer ' + jwtToken\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst updateProfileImage = async () => {\r\n\t\tconst profileForm = new FormData(profileImageFormRef.current);\r\n\t\tconst res = await fetch('http://localhost:8000/upload-profile-image', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: 'Bearer ' + jwtToken\r\n\t\t\t},\r\n\t\t\tbody: profileForm\r\n\t\t});\r\n\t\tif (res.status !== 200) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst resJson = await res.json();\r\n\t\t// dispatch(setProfileImage(resJson['msg']));\r\n\t\tconsole.log(resJson['msg']);\r\n\t\tgetProfileImage();\r\n\t\t// Router.push(Router.pathname);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst currentDateInfo = new Date();\r\n\t\tconst month = months[currentDateInfo.getMonth()];\r\n\t\tconst day = currentDateInfo.getDate();\r\n\t\tconst year = currentDateInfo.getFullYear();\r\n\t\tsetCurrentDate(month + ' ' + day + ', ' + year);\r\n\t\tgetProfileImage();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className={styles.profileContainer}>\r\n\t\t\t<div className={styles.imageInputSection}>\r\n\t\t\t\t<img className={styles.profileImage} src={profileImage} alt={profileName} />\r\n\t\t\t\t<FontAwesomeIcon className={styles.editIcon} icon={'user-edit'} />\r\n\t\t\t\t<form encType=\"multipart/form-data\" ref={profileImageFormRef}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tonChange={updateProfileImage}\r\n\t\t\t\t\t\taccept={'image/*'}\r\n\t\t\t\t\t\tclassName={styles.profileImageInput}\r\n\t\t\t\t\t\tname=\"image\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<h2>Hey {profileFirstName}!</h2>\r\n\t\t\t<h5>{currentDate}</h5>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}