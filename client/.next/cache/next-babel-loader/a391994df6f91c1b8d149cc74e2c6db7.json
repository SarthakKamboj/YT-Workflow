{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Sarthak\\\\YT_Workflow_Cloud\\\\client\\\\pages\\\\sign-up.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport styles from '../styles/scss/sign-up.module.scss';\nimport Link from 'next/link';\nimport classnames from 'classnames';\nimport { useState } from 'react';\n\nvar Joi = require('@hapi/joi');\n\nvar SignUp = function SignUp() {\n  _s();\n\n  var _classnames, _classnames3, _classnames5;\n\n  var _useState = useState(''),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(''),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(''),\n      password = _useState3[0],\n      setPassword = _useState3[1];\n\n  var _useState4 = useState(true),\n      emailInputEmpty = _useState4[0],\n      setEmailInputEmpty = _useState4[1];\n\n  var _useState5 = useState(true),\n      passwordInputEmpty = _useState5[0],\n      setPasswordInputEmpty = _useState5[1];\n\n  var _useState6 = useState(true),\n      usernameEmpty = _useState6[0],\n      setUsernameEmpty = _useState6[1];\n\n  var _useState7 = useState(false),\n      viewPassword = _useState7[0],\n      setViewPassword = _useState7[1];\n\n  var _useState8 = useState(''),\n      error = _useState8[0],\n      setError = _useState8[1];\n\n  var minPasswordLength = 2;\n  var signUpSchema = Joi.object({\n    username: Joi.string().required(),\n    email: Joi.string().required().email({\n      minDomainSegments: 2,\n      tlds: {\n        allow: ['com', 'net']\n      }\n    }),\n    password: Joi.string().required().min(minPasswordLength)\n  });\n\n  var updateEmail = function updateEmail(input) {\n    setEmail(input);\n    if (input === '') setEmailInputEmpty(true);else setEmailInputEmpty(false);\n  };\n\n  var updatePassword = function updatePassword(input) {\n    setPassword(input);\n    if (input === '') setPasswordInputEmpty(true);else setPasswordInputEmpty(false);\n  };\n\n  var updateUsername = function updateUsername(input) {\n    setUsername(input);\n    if (input === '') setUsernameEmpty(true);else setUsernameEmpty(false);\n  };\n\n  var checkIfEncodeUriValid = function checkIfEncodeUriValid(input) {\n    return encodeURI(input) === input;\n  };\n\n  var toCapitalize = function toCapitalize(input) {\n    return input.slice(0, 1).toUpperCase() + input.slice(1);\n  };\n\n  var submitSignUpInfo = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var usernameUriEncoded, emailUriEncoded, passwordUriEncoded, signUpValidation, empty, valid, tooShort, errorField, data, signInRequest, signInJson;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              usernameUriEncoded = checkIfEncodeUriValid(username.replace(' ', ''));\n              emailUriEncoded = checkIfEncodeUriValid(email);\n              passwordUriEncoded = checkIfEncodeUriValid(password);\n              signUpValidation = signUpSchema.validate({\n                username: username,\n                email: email,\n                password: password\n              });\n\n              if (!signUpValidation.error) {\n                _context.next = 19;\n                break;\n              }\n\n              empty = signUpValidation.error.toString().includes('empty');\n              valid = signUpValidation.error.toString().includes('valid');\n              tooShort = signUpValidation.error.toString().includes('at least');\n              errorField = signUpValidation.error.toString().split('\"')[1];\n\n              if (!empty) {\n                _context.next = 13;\n                break;\n              }\n\n              return _context.abrupt(\"return\", setError(toCapitalize(errorField) + ' cannot be empty'));\n\n            case 13:\n              if (!valid) {\n                _context.next = 17;\n                break;\n              }\n\n              return _context.abrupt(\"return\", setError(toCapitalize(errorField) + ' must be valid'));\n\n            case 17:\n              if (!(errorField === 'password' && tooShort)) {\n                _context.next = 19;\n                break;\n              }\n\n              return _context.abrupt(\"return\", setError(toCapitalize(errorField) + \" must be at least \".concat(minPasswordLength, \" characters long.\")));\n\n            case 19:\n              if (!(!usernameUriEncoded || !emailUriEncoded || !passwordUriEncoded)) {\n                _context.next = 21;\n                break;\n              }\n\n              return _context.abrupt(\"return\", setError('Login information can only have letters and numbers!'));\n\n            case 21:\n              data = {\n                name: username,\n                email: email,\n                password: password\n              };\n              console.log(data);\n              console.log(process.env.SIGN_UP_URL);\n              _context.next = 26;\n              return fetch(process.env.SIGN_UP_URL, {\n                method: 'POST',\n                mode: 'cors',\n                credentials: 'same-origin',\n                Accept: 'application/json',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: data\n              });\n\n            case 26:\n              signInRequest = _context.sent;\n              _context.next = 29;\n              return signInRequest.json();\n\n            case 29:\n              signInJson = _context.sent;\n\n              if (!(signInJson.msg === 'User with this email already exists.')) {\n                _context.next = 32;\n                break;\n              }\n\n              return _context.abrupt(\"return\", setError(signInJson.msg));\n\n            case 32:\n              setError('');\n              return _context.abrupt(\"return\", localStorage.setItem('jwt', signInJson.token));\n\n            case 34:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function submitSignUpInfo() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var toggleViewPassword = function toggleViewPassword() {\n    setViewPassword(!viewPassword);\n  };\n\n  return __jsx(\"main\", {\n    className: styles.signUpContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 3\n    }\n  }, __jsx(\"section\", {\n    className: styles.textSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 4\n    }\n  }, __jsx(\"div\", {\n    className: styles.logoImage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, __jsx(\"img\", {\n    src: \"./images/logo.jpg\",\n    alt: \"Workflow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 6\n    }\n  })), __jsx(\"div\", {\n    className: styles.signUpSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 6\n    }\n  }, \"Sign Up to \", __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 18\n    }\n  }), \" Workflow\"), __jsx(\"div\", {\n    className: styles.googleSignIn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 6\n    }\n  }, __jsx(\"img\", {\n    src: \"/images/google_logo.png\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }), __jsx(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, \"Sign Up with Google\")), __jsx(\"div\", {\n    className: styles.emailSignIn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 6\n    }\n  }, __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, \"Or sign-up with email\"), __jsx(\"form\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 8\n    }\n  }, __jsx(\"h4\", {\n    className: classnames((_classnames = {}, _defineProperty(_classnames, styles.label, true), _defineProperty(_classnames, styles.usernameLabel, true), _defineProperty(_classnames, styles.labelHover, !usernameEmpty), _classnames)),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, \"Username\"), __jsx(\"input\", {\n    value: username,\n    className: classnames(_defineProperty({}, styles.errorInput, error.includes('Username'))),\n    onChange: function onChange(e) {\n      return updateUsername(e.target.value);\n    },\n    type: \"text\",\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 8\n    }\n  }, __jsx(\"h4\", {\n    className: classnames((_classnames3 = {}, _defineProperty(_classnames3, styles.label, true), _defineProperty(_classnames3, styles.emailLabel, true), _defineProperty(_classnames3, styles.labelHover, !emailInputEmpty), _classnames3)),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, \"Email\"), __jsx(\"input\", {\n    className: classnames(_defineProperty({}, styles.errorInput, error.includes('Email'))),\n    value: email,\n    onChange: function onChange(e) {\n      return updateEmail(e.target.value);\n    },\n    type: \"email\",\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 8\n    }\n  }, __jsx(\"h4\", {\n    className: classnames((_classnames5 = {}, _defineProperty(_classnames5, styles.label, true), _defineProperty(_classnames5, styles.passwordLabel, true), _defineProperty(_classnames5, styles.labelHover, !passwordInputEmpty), _classnames5)),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, \"Password\"), __jsx(\"input\", {\n    value: password,\n    className: classnames(_defineProperty({}, styles.errorInput, error.includes('Password'))),\n    onChange: function onChange(e) {\n      return updatePassword(e.target.value);\n    },\n    type: viewPassword ? 'text' : 'password',\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }), __jsx(\"img\", {\n    src: \"/images/eye.png\",\n    onClick: function onClick() {\n      return toggleViewPassword();\n    },\n    className: styles.eyeIcon,\n    alt: \"Toggle Password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  })), __jsx(\"span\", {\n    style: {\n      textAlign: 'center',\n      width: '70%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 8\n    }\n  }, error), __jsx(\"div\", {\n    onClick: function onClick() {\n      return submitSignUpInfo();\n    },\n    className: styles.submitEmailForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 8\n    }\n  }, \"Create Your Account\")), __jsx(\"p\", {\n    className: styles.legal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }, \"By signing up, I agree to the \", __jsx(\"span\", {\n    className: styles.underline,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 38\n    }\n  }, \"Privacy Policy\"), \" and\", ' ', __jsx(\"span\", {\n    className: styles.underline,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 8\n    }\n  }, \"Terms of Service\"))), __jsx(\"h3\", {\n    className: styles.switchToLogin,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 6\n    }\n  }, \"Already have an account?\", '  ', __jsx(Link, {\n    href: \"/login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: styles.loginBtn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 8\n    }\n  }, \"Log in\")))), __jsx(\"div\", {\n    className: styles.copyright,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }, \"\\xA9 2020. All Rights Reserved. Workflow.\")), __jsx(\"section\", {\n    className: styles.slideshowSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 4\n    }\n  }));\n};\n\n_s(SignUp, \"sxqnQ1UwaOT9NStRrfYsQsN6EuQ=\");\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["C:/Sarthak/YT_Workflow_Cloud/client/pages/sign-up.js"],"names":["styles","Link","classnames","useState","Joi","require","SignUp","email","setEmail","username","setUsername","password","setPassword","emailInputEmpty","setEmailInputEmpty","passwordInputEmpty","setPasswordInputEmpty","usernameEmpty","setUsernameEmpty","viewPassword","setViewPassword","error","setError","minPasswordLength","signUpSchema","object","string","required","minDomainSegments","tlds","allow","min","updateEmail","input","updatePassword","updateUsername","checkIfEncodeUriValid","encodeURI","toCapitalize","slice","toUpperCase","submitSignUpInfo","usernameUriEncoded","replace","emailUriEncoded","passwordUriEncoded","signUpValidation","validate","empty","toString","includes","valid","tooShort","errorField","split","data","name","console","log","process","env","SIGN_UP_URL","fetch","method","mode","credentials","Accept","headers","body","signInRequest","json","signInJson","msg","localStorage","setItem","token","toggleViewPassword","signUpContainer","textSection","logoImage","signUpSection","googleSignIn","emailSignIn","label","usernameLabel","labelHover","errorInput","e","target","value","emailLabel","passwordLabel","eyeIcon","textAlign","width","submitEmailForm","legal","underline","switchToLogin","loginBtn","copyright","slideshowSection"],"mappings":"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","sourcesContent":["import styles from '../styles/scss/sign-up.module.scss';\r\nimport Link from 'next/link';\r\nimport classnames from 'classnames';\r\nimport { useState } from 'react';\r\nconst Joi = require('@hapi/joi');\r\n\r\nconst SignUp = () => {\r\n\tconst [ email, setEmail ] = useState('');\r\n\tconst [ username, setUsername ] = useState('');\r\n\tconst [ password, setPassword ] = useState('');\r\n\tconst [ emailInputEmpty, setEmailInputEmpty ] = useState(true);\r\n\tconst [ passwordInputEmpty, setPasswordInputEmpty ] = useState(true);\r\n\tconst [ usernameEmpty, setUsernameEmpty ] = useState(true);\r\n\tconst [ viewPassword, setViewPassword ] = useState(false);\r\n\tconst [ error, setError ] = useState('');\r\n\r\n\tconst minPasswordLength = 2;\r\n\r\n\tconst signUpSchema = Joi.object({\r\n\t\tusername: Joi.string().required(),\r\n\t\temail: Joi.string().required().email({ minDomainSegments: 2, tlds: { allow: [ 'com', 'net' ] } }),\r\n\t\tpassword: Joi.string().required().min(minPasswordLength)\r\n\t});\r\n\r\n\tconst updateEmail = (input) => {\r\n\t\tsetEmail(input);\r\n\t\tif (input === '') setEmailInputEmpty(true);\r\n\t\telse setEmailInputEmpty(false);\r\n\t};\r\n\r\n\tconst updatePassword = (input) => {\r\n\t\tsetPassword(input);\r\n\t\tif (input === '') setPasswordInputEmpty(true);\r\n\t\telse setPasswordInputEmpty(false);\r\n\t};\r\n\r\n\tconst updateUsername = (input) => {\r\n\t\tsetUsername(input);\r\n\t\tif (input === '') setUsernameEmpty(true);\r\n\t\telse setUsernameEmpty(false);\r\n\t};\r\n\r\n\tconst checkIfEncodeUriValid = (input) => {\r\n\t\treturn encodeURI(input) === input;\r\n\t};\r\n\r\n\tconst toCapitalize = (input) => {\r\n\t\treturn input.slice(0, 1).toUpperCase() + input.slice(1);\r\n\t};\r\n\r\n\tconst submitSignUpInfo = async () => {\r\n\t\tconst usernameUriEncoded = checkIfEncodeUriValid(username.replace(' ', ''));\r\n\t\tconst emailUriEncoded = checkIfEncodeUriValid(email);\r\n\t\tconst passwordUriEncoded = checkIfEncodeUriValid(password);\r\n\t\tconst signUpValidation = signUpSchema.validate({ username, email, password });\r\n\t\tif (signUpValidation.error) {\r\n\t\t\tconst empty = signUpValidation.error.toString().includes('empty');\r\n\t\t\tconst valid = signUpValidation.error.toString().includes('valid');\r\n\t\t\tconst tooShort = signUpValidation.error.toString().includes('at least');\r\n\t\t\tconst errorField = signUpValidation.error.toString().split('\"')[1];\r\n\t\t\tif (empty) {\r\n\t\t\t\treturn setError(toCapitalize(errorField) + ' cannot be empty');\r\n\t\t\t} else if (valid) {\r\n\t\t\t\treturn setError(toCapitalize(errorField) + ' must be valid');\r\n\t\t\t} else if (errorField === 'password' && tooShort) {\r\n\t\t\t\treturn setError(toCapitalize(errorField) + ` must be at least ${minPasswordLength} characters long.`);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!usernameUriEncoded || !emailUriEncoded || !passwordUriEncoded) {\r\n\t\t\treturn setError('Login information can only have letters and numbers!');\r\n\t\t}\r\n\t\tconst data = { name: username, email, password };\r\n\t\tconsole.log(data);\r\n\t\tconsole.log(process.env.SIGN_UP_URL);\r\n\t\tconst signInRequest = await fetch(process.env.SIGN_UP_URL, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tmode: 'cors',\r\n\t\t\tcredentials: 'same-origin',\r\n\t\t\tAccept: 'application/json',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: data\r\n\t\t});\r\n\t\tconst signInJson = await signInRequest.json();\r\n\t\tif (signInJson.msg === 'User with this email already exists.') {\r\n\t\t\treturn setError(signInJson.msg);\r\n\t\t}\r\n\t\tsetError('');\r\n\t\treturn localStorage.setItem('jwt', signInJson.token);\r\n\t};\r\n\r\n\tconst toggleViewPassword = () => {\r\n\t\tsetViewPassword(!viewPassword);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<main className={styles.signUpContainer}>\r\n\t\t\t<section className={styles.textSection}>\r\n\t\t\t\t<div className={styles.logoImage}>\r\n\t\t\t\t\t<img src=\"./images/logo.jpg\" alt=\"Workflow\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.signUpSection}>\r\n\t\t\t\t\t<h1>\r\n\t\t\t\t\t\tSign Up to <br /> Workflow\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t\t<div className={styles.googleSignIn}>\r\n\t\t\t\t\t\t<img src=\"/images/google_logo.png\" />\r\n\t\t\t\t\t\t<h4>Sign Up with Google</h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={styles.emailSignIn}>\r\n\t\t\t\t\t\t<p>Or sign-up with email</p>\r\n\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h4\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\t\t[styles.label]: true,\r\n\t\t\t\t\t\t\t\t\t\t[styles.usernameLabel]: true,\r\n\t\t\t\t\t\t\t\t\t\t[styles.labelHover]: !usernameEmpty\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tUsername\r\n\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tvalue={username}\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({ [styles.errorInput]: error.includes('Username') })}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => updateUsername(e.target.value)}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h4\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\t\t[styles.label]: true,\r\n\t\t\t\t\t\t\t\t\t\t[styles.emailLabel]: true,\r\n\t\t\t\t\t\t\t\t\t\t[styles.labelHover]: !emailInputEmpty\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tEmail\r\n\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({ [styles.errorInput]: error.includes('Email') })}\r\n\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => updateEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h4\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\t\t[styles.label]: true,\r\n\t\t\t\t\t\t\t\t\t\t[styles.passwordLabel]: true,\r\n\t\t\t\t\t\t\t\t\t\t[styles.labelHover]: !passwordInputEmpty\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tPassword\r\n\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({ [styles.errorInput]: error.includes('Password') })}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => updatePassword(e.target.value)}\r\n\t\t\t\t\t\t\t\t\ttype={viewPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc=\"/images/eye.png\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => toggleViewPassword()}\r\n\t\t\t\t\t\t\t\t\tclassName={styles.eyeIcon}\r\n\t\t\t\t\t\t\t\t\talt=\"Toggle Password\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span style={{ textAlign: 'center', width: '70%' }}>{error}</span>\r\n\t\t\t\t\t\t\t<div onClick={() => submitSignUpInfo()} className={styles.submitEmailForm}>\r\n\t\t\t\t\t\t\t\tCreate Your Account\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<p className={styles.legal}>\r\n\t\t\t\t\t\t\tBy signing up, I agree to the <span className={styles.underline}>Privacy Policy</span> and{' '}\r\n\t\t\t\t\t\t\t<span className={styles.underline}>Terms of Service</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h3 className={styles.switchToLogin}>\r\n\t\t\t\t\t\tAlready have an account?{'  '}\r\n\t\t\t\t\t\t<Link href=\"/login\">\r\n\t\t\t\t\t\t\t<span className={styles.loginBtn}>Log in</span>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.copyright}>&copy; 2020. All Rights Reserved. Workflow.</div>\r\n\t\t\t</section>\r\n\t\t\t<section className={styles.slideshowSection} />\r\n\t\t</main>\r\n\t);\r\n};\r\n\r\nexport default SignUp;\r\n"]},"metadata":{},"sourceType":"module"}