{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Sarthak\\\\YT_Workflow_Cloud\\\\client\\\\pages\\\\dashboard\\\\statistics.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport styles from '../../styles/scss/statistics.module.scss';\nimport classnames from 'classnames';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setProfileImage } from '../../components/actions/profileImageActions';\nimport { setProfileName } from '../../components/actions/profileNameActions';\nimport DashboardMenu from '../../components/DashboardMenu'; // import Chart from 'chart.js';\n\nimport { Bar, Line, Pie, Doughnut } from 'react-chartjs-2';\nimport { useRef, useState, useEffect } from 'react';\n\nvar Dashboard = function Dashboard() {\n  _s();\n\n  var jwt = useSelector(function (state) {\n    return state.jwtToken;\n  });\n\n  var _useState = useState(),\n      userFilesBreakdown = _useState[0],\n      setUserFilesBreakdown = _useState[1];\n\n  var _useState2 = useState(),\n      userFilesLabels = _useState2[0],\n      setUserFilesLabels = _useState2[1];\n\n  var _useState3 = useState(),\n      userStarredWorkflows = _useState3[0],\n      setUserStarredWorkflows = _useState3[1];\n\n  var _useState4 = useState(),\n      userStarredLabels = _useState4[0],\n      setUserStarredLabels = _useState4[1];\n\n  var _useState5 = useState(),\n      userFinishedWorkflows = _useState5[0],\n      setUserFinishedWorkflows = _useState5[1];\n\n  var _useState6 = useState(),\n      userFinishedLabels = _useState6[0],\n      setUserFinishedLabels = _useState6[1];\n\n  var capitalize = function capitalize(str) {\n    return str.slice(0, 1).toUpperCase() + str.slice(1);\n  };\n\n  var fetchFileBreakdown = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, resJson, info;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('http://localhost:8000/workflows-file-breakdown', {\n                headers: {\n                  'Content-Type': 'application/json',\n                  Authorization: 'Bearer ' + jwt\n                }\n              });\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res.status === 200)) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              resJson = _context.sent;\n              info = resJson['msg'];\n              setUserFilesLabels(Object.keys(info).map(function (label) {\n                return capitalize(label);\n              }));\n              setUserFilesBreakdown(Object.values(info));\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchFileBreakdown() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var fetchFinishedBreakdown = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res, resJson, info;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch('http://localhost:8000/workflows-finished-data', {\n                headers: {\n                  'Content-Type': 'application/json',\n                  Authorization: 'Bearer ' + jwt\n                }\n              });\n\n            case 2:\n              res = _context2.sent;\n\n              if (!(res.status === 200)) {\n                _context2.next = 10;\n                break;\n              }\n\n              _context2.next = 6;\n              return res.json();\n\n            case 6:\n              resJson = _context2.sent;\n              info = resJson['msg'];\n              setUserFinishedLabels(Object.keys(info).map(function (label) {\n                return capitalize(label);\n              }));\n              setUserFinishedWorkflows(Object.values(info));\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function fetchFinishedBreakdown() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var fetchStarredBreakdown = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, resJson, info;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return fetch('http://localhost:8000/workflows-starred-data', {\n                headers: {\n                  'Content-Type': 'application/json',\n                  Authorization: 'Bearer ' + jwt\n                }\n              });\n\n            case 2:\n              res = _context3.sent;\n\n              if (!(res.status === 200)) {\n                _context3.next = 10;\n                break;\n              }\n\n              _context3.next = 6;\n              return res.json();\n\n            case 6:\n              resJson = _context3.sent;\n              info = resJson['msg'];\n              setUserStarredLabels(Object.keys(info).map(function (label) {\n                return capitalize(label);\n              }));\n              setUserStarredWorkflows(Object.values(info));\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function fetchStarredBreakdown() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchFileBreakdown();\n    fetchFinishedBreakdown();\n    fetchStarredBreakdown();\n  }, []);\n\n  var fileBreakdownChart = function fileBreakdownChart(canvas) {\n    // const ctx = canvas.getContext('2d');\n    canvas.style.width = '50%';\n    canvas.style.height = '45%';\n    return {\n      labels: userFilesLabels,\n      datasets: [{\n        // label: 'File Breakdown',\n        data: userFilesBreakdown,\n        backgroundColor: ['#DC1C13', '#F1959B', '#EA4C46', '#F07470'],\n        borderWidth: 2,\n        hoverBorderColor: 'black',\n        borderColor: 'white'\n      }]\n    };\n  };\n\n  var starredBreakdownChart = function starredBreakdownChart(canvas) {\n    // const ctx = canvas.getContext('2d');\n    canvas.style.width = '50%';\n    canvas.style.height = '45%';\n    return {\n      labels: userStarredLabels,\n      datasets: [{\n        // label: 'File Breakdown',\n        data: userStarredWorkflows,\n        backgroundColor: ['#DC1C13', '#F1959B'],\n        borderWidth: 2,\n        hoverBorderColor: 'black',\n        borderColor: 'white',\n        label: 'Hi'\n      }]\n    };\n  };\n\n  var finishedBreakdownChart = function finishedBreakdownChart(canvas) {\n    // const ctx = canvas.getContext('2d');\n    canvas.style.width = '50%';\n    canvas.style.height = '45%';\n    return {\n      labels: userFinishedLabels,\n      datasets: [{\n        // label: 'File Breakdown',\n        data: userFinishedWorkflows,\n        backgroundColor: ['#DC1C13', '#F1959B'],\n        borderWidth: 2,\n        hoverBorderColor: 'black',\n        borderColor: 'white',\n        label: 'Hi'\n      }]\n    };\n  }; // const loadCharts = () => {};\n  // useEffect(\n  // \t() => {\n  // \t\tloadCharts();\n  // \t\treturn () => {\n  // \t\t\tcleanup;\n  // \t\t};\n  // \t},\n  // \t[ input ]\n  // );\n\n\n  var chartOptions = {\n    legend: {\n      position: 'right',\n      labels: {\n        fontSize: 25\n      }\n    },\n    tooltips: {\n      bodyFontSize: 40,\n      padding: 5\n    }\n  };\n  return __jsx(\"main\", {\n    className: styles.statisticsContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 3\n    }\n  }, __jsx(\"div\", {\n    className: styles.dashboardMenuContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 4\n    }\n  }, __jsx(DashboardMenu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  })), __jsx(\"div\", {\n    className: styles.statisticsSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 4\n    }\n  }, __jsx(Doughnut, {\n    data: fileBreakdownChart,\n    responsive: true,\n    options: chartOptions,\n    className: styles.chart,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }\n  }), __jsx(Doughnut, {\n    data: starredBreakdownChart,\n    responsive: true,\n    options: chartOptions,\n    className: styles.chart,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }), __jsx(Doughnut, {\n    data: finishedBreakdownChart,\n    responsive: true,\n    options: chartOptions,\n    className: styles.chart,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }\n  })));\n};\n\n_s(Dashboard, \"aXeDcSrUCjZK6u3yAwN5uNSUnVQ=\", false, function () {\n  return [useSelector];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["C:/Sarthak/YT_Workflow_Cloud/client/pages/dashboard/statistics.js"],"names":["styles","classnames","useSelector","useDispatch","setProfileImage","setProfileName","DashboardMenu","Bar","Line","Pie","Doughnut","useRef","useState","useEffect","Dashboard","jwt","state","jwtToken","userFilesBreakdown","setUserFilesBreakdown","userFilesLabels","setUserFilesLabels","userStarredWorkflows","setUserStarredWorkflows","userStarredLabels","setUserStarredLabels","userFinishedWorkflows","setUserFinishedWorkflows","userFinishedLabels","setUserFinishedLabels","capitalize","str","slice","toUpperCase","fetchFileBreakdown","fetch","headers","Authorization","res","status","json","resJson","info","Object","keys","map","label","values","fetchFinishedBreakdown","fetchStarredBreakdown","fileBreakdownChart","canvas","style","width","height","labels","datasets","data","backgroundColor","borderWidth","hoverBorderColor","borderColor","starredBreakdownChart","finishedBreakdownChart","chartOptions","legend","position","fontSize","tooltips","bodyFontSize","padding","statisticsContainer","dashboardMenuContainer","statisticsSection","chart"],"mappings":"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","sourcesContent":["import styles from '../../styles/scss/statistics.module.scss';\r\nimport classnames from 'classnames';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setProfileImage } from '../../components/actions/profileImageActions';\r\nimport { setProfileName } from '../../components/actions/profileNameActions';\r\nimport DashboardMenu from '../../components/DashboardMenu';\r\n// import Chart from 'chart.js';\r\nimport { Bar, Line, Pie, Doughnut } from 'react-chartjs-2';\r\nimport { useRef, useState, useEffect } from 'react';\r\n\r\nconst Dashboard = () => {\r\n\tconst jwt = useSelector((state) => state.jwtToken);\r\n\tconst [ userFilesBreakdown, setUserFilesBreakdown ] = useState();\r\n\tconst [ userFilesLabels, setUserFilesLabels ] = useState();\r\n\r\n\tconst [ userStarredWorkflows, setUserStarredWorkflows ] = useState();\r\n\tconst [ userStarredLabels, setUserStarredLabels ] = useState();\r\n\r\n\tconst [ userFinishedWorkflows, setUserFinishedWorkflows ] = useState();\r\n\tconst [ userFinishedLabels, setUserFinishedLabels ] = useState();\r\n\r\n\tconst capitalize = (str) => {\r\n\t\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\r\n\t};\r\n\r\n\tconst fetchFileBreakdown = async () => {\r\n\t\tconst res = await fetch('http://localhost:8000/workflows-file-breakdown', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\tAuthorization: 'Bearer ' + jwt\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (res.status === 200) {\r\n\t\t\tconst resJson = await res.json();\r\n\t\t\tconst info = resJson['msg'];\r\n\r\n\t\t\tsetUserFilesLabels(Object.keys(info).map((label) => capitalize(label)));\r\n\t\t\tsetUserFilesBreakdown(Object.values(info));\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchFinishedBreakdown = async () => {\r\n\t\tconst res = await fetch('http://localhost:8000/workflows-finished-data', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\tAuthorization: 'Bearer ' + jwt\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (res.status === 200) {\r\n\t\t\tconst resJson = await res.json();\r\n\t\t\tconst info = resJson['msg'];\r\n\r\n\t\t\tsetUserFinishedLabels(Object.keys(info).map((label) => capitalize(label)));\r\n\t\t\tsetUserFinishedWorkflows(Object.values(info));\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchStarredBreakdown = async () => {\r\n\t\tconst res = await fetch('http://localhost:8000/workflows-starred-data', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\tAuthorization: 'Bearer ' + jwt\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (res.status === 200) {\r\n\t\t\tconst resJson = await res.json();\r\n\t\t\tconst info = resJson['msg'];\r\n\r\n\t\t\tsetUserStarredLabels(Object.keys(info).map((label) => capitalize(label)));\r\n\t\t\tsetUserStarredWorkflows(Object.values(info));\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchFileBreakdown();\r\n\t\tfetchFinishedBreakdown();\r\n\t\tfetchStarredBreakdown();\r\n\t}, []);\r\n\r\n\tconst fileBreakdownChart = (canvas) => {\r\n\t\t// const ctx = canvas.getContext('2d');\r\n\t\tcanvas.style.width = '50%';\r\n\t\tcanvas.style.height = '45%';\r\n\t\treturn {\r\n\t\t\tlabels: userFilesLabels,\r\n\t\t\tdatasets: [\r\n\t\t\t\t{\r\n\t\t\t\t\t// label: 'File Breakdown',\r\n\t\t\t\t\tdata: userFilesBreakdown,\r\n\t\t\t\t\tbackgroundColor: [ '#DC1C13', '#F1959B', '#EA4C46', '#F07470' ],\r\n\t\t\t\t\tborderWidth: 2,\r\n\t\t\t\t\thoverBorderColor: 'black',\r\n\t\t\t\t\tborderColor: 'white'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t};\r\n\r\n\tconst starredBreakdownChart = (canvas) => {\r\n\t\t// const ctx = canvas.getContext('2d');\r\n\t\tcanvas.style.width = '50%';\r\n\t\tcanvas.style.height = '45%';\r\n\t\treturn {\r\n\t\t\tlabels: userStarredLabels,\r\n\t\t\tdatasets: [\r\n\t\t\t\t{\r\n\t\t\t\t\t// label: 'File Breakdown',\r\n\t\t\t\t\tdata: userStarredWorkflows,\r\n\t\t\t\t\tbackgroundColor: [ '#DC1C13', '#F1959B' ],\r\n\t\t\t\t\tborderWidth: 2,\r\n\t\t\t\t\thoverBorderColor: 'black',\r\n\t\t\t\t\tborderColor: 'white',\r\n\t\t\t\t\tlabel: 'Hi'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t};\r\n\r\n\tconst finishedBreakdownChart = (canvas) => {\r\n\t\t// const ctx = canvas.getContext('2d');\r\n\t\tcanvas.style.width = '50%';\r\n\t\tcanvas.style.height = '45%';\r\n\t\treturn {\r\n\t\t\tlabels: userFinishedLabels,\r\n\t\t\tdatasets: [\r\n\t\t\t\t{\r\n\t\t\t\t\t// label: 'File Breakdown',\r\n\t\t\t\t\tdata: userFinishedWorkflows,\r\n\t\t\t\t\tbackgroundColor: [ '#DC1C13', '#F1959B' ],\r\n\t\t\t\t\tborderWidth: 2,\r\n\t\t\t\t\thoverBorderColor: 'black',\r\n\t\t\t\t\tborderColor: 'white',\r\n\t\t\t\t\tlabel: 'Hi'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t};\r\n\r\n\t// const loadCharts = () => {};\r\n\r\n\t// useEffect(\r\n\t// \t() => {\r\n\t// \t\tloadCharts();\r\n\t// \t\treturn () => {\r\n\t// \t\t\tcleanup;\r\n\t// \t\t};\r\n\t// \t},\r\n\t// \t[ input ]\r\n\t// );\r\n\r\n\tconst chartOptions = {\r\n\t\tlegend: {\r\n\t\t\tposition: 'right',\r\n\t\t\tlabels: {\r\n\t\t\t\tfontSize: 25\r\n\t\t\t}\r\n\t\t},\r\n\t\ttooltips: {\r\n\t\t\tbodyFontSize: 40,\r\n\t\t\tpadding: 5\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<main className={styles.statisticsContainer}>\r\n\t\t\t<div className={styles.dashboardMenuContainer}>\r\n\t\t\t\t<DashboardMenu />\r\n\t\t\t</div>\r\n\t\t\t<div className={styles.statisticsSection}>\r\n\t\t\t\t<Doughnut data={fileBreakdownChart} responsive={true} options={chartOptions} className={styles.chart} />\r\n\t\t\t\t<Doughnut\r\n\t\t\t\t\tdata={starredBreakdownChart}\r\n\t\t\t\t\tresponsive={true}\r\n\t\t\t\t\toptions={chartOptions}\r\n\t\t\t\t\tclassName={styles.chart}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* <Doughnut data={fileBreakdownChart} responsive={true} options={chartOptions} className={styles.chart} /> */}\r\n\t\t\t\t<Doughnut\r\n\t\t\t\t\tdata={finishedBreakdownChart}\r\n\t\t\t\t\tresponsive={true}\r\n\t\t\t\t\toptions={chartOptions}\r\n\t\t\t\t\tclassName={styles.chart}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</main>\r\n\t);\r\n};\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}